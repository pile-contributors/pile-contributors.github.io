---
layout: default
title: CMake Macros Library
---

<div id="home">

	{% include cmake_list.html %}

	<div class="section">
		<h1 class="section_title"><a name="pileCmakeOutputPath">pileCmakeOutputPath</a></h1>
		<p>
			Computes an output path CMake style. A relative path to 
			<b>PROJECT_SOURCE_DIR</b> is computed using 
			<a href="#pileRelativePath">pileRelativePath</a>, then it is
			appended to <b>PROJECT_BINARY_DIR</b>.
		</p>
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">output</dt>
					<dd class="arguments">
						the name of the output variable;
					</dd>
					<dt class="arguments">input</dt>
					<dd class="arguments">
						(absolute) input path
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileCmakeOutputPath (OUTPUT_VAR "${CMAKE_SOURCE_DIR}/a_file.cc")
				</div>
			</dd>
		</dl>
	</div>
  
  
	<div class="section">
		<h1 class="section_title"><a name="pileRelativePath">pileRelativePath</a></h1>
		<p>
			Computes a relative path. Both <b>reference</b> ans <b>input</b>
			must be either unix like (/usr/bin) or Windows like (C:/Windows).
			Mixing them is undefined.
		</p>
		<ul>
		<li>for <b>input</b> /a/b/c and <b>reference</b> /a/b the result is ..</li>
		<li>for <b>input</b> /a/b and <b>reference</b> /a/b/c the result is c</li>
		<li>for <b>input</b> /a/1/2/3 and <b>reference</b> /a/b/c the result is  ../../../b/c</li>
		</ul>
		<p>If the paths are the same . is returned</p>
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">output</dt>
					<dd class="arguments">
						the name of the output variable;
					</dd>
					<dt class="arguments">reference</dt>
					<dd class="arguments">
						(absolute) reference path
					</dd>
					<dt class="arguments">input</dt>
					<dd class="arguments">
						(absolute) input path
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileRelativePath (OUTPUT_VAR "${CMAKE_SOURCE_DIR}" "${CMAKE_SOURCE_DIR}/a_file.cc" )
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileUsedBy">pileUsedBy</a></h1>
		<p>
			Depending on the use style for this pile, may add the library
			to the target using <b>target_link_libraries</b>
			or it may create a dependency to the copy headers target.
		</p>
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">pile_name</dt>
					<dd class="arguments">
						name of the pile
					</dd>
					<dt class="arguments">target</dt>
					<dd class="arguments">
						name of the target
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileUsedBy (myLib somePile)
				</div>
			</dd>
			<dt>Status:</dt>
			<dd>
				<span style="color:red">not fully implemented</span>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileDebugMessage">pileDebugMessage</a></h1>
		<p>
			Shows a debug message on behalf of the pile. These messages
			can be enabled or disabled on a per-pile basis using
			<b><em>PILE</em>_DEBUG_MSG</b> variable (<b>PILE</b> is the
			name of the pile upper-cased).
		</p>
		<p>
			To disable all messages generated by this macro set 
			<b>PILE_SUPPORT_DEBUG</b> to OFF (<b>PILE</b> in this case
			is the actual word PILE).
		</p>
		<p>
			The macros in <a href="https://github.com/pile-contributors/pile-cmake">pile-cmake repository</a>
			use this macro to report debug events.
		</p>
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile
					</dd>
					<dt class="arguments">message</dt>
					<dd class="arguments">
						the message to show
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileDebugMessage (SomePile "message from a pile")
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileInclude">pileInclude</a></h1>
		<p>
			Includes a pile .cmake file but does not initialize the pile.
		</p>
		<p>
			Path can be provided as optional arguments.
			If path is provided it can be absolute or relative to <b>CMAKE_SOURCE_DIR</b>.
			If path is not provided then <b>${CMAKE_SOURCE_DIR}/name</b> and
			<b>${CMAKE_SOURCE_DIR}/name-src</b> are tried.
		</p>
		<p>
			Defines following variables:
		</p>
		<dl>
			<dt><em>PILE</em>_NAME</dt><dd>the name with all-lower-case letters</dd>
			<dt><em>PILE</em>_NAME_U</dt><dd>the name with all-UPPER-case letters</dd>
			<dt><em>PILE</em>_NAME_C</dt><dd>the name as provided (should be CamelCase)</dd>
			<dt><em>PILE</em>_SOURCE_DIR</dt><dd>the path where this pile is stored (not including /cmake)</dd>
			<dt><em>PILE</em>_BINARY_DIR</dt><dd>the path where this pile generates output</dd>
		</dl>
		<p>
			 By using this function the top level CMake file does not have to
			 alter <b>CMAKE_MODULE_PATH</b> itself.
		</p>
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile, camel cased;
					</dd>
					<dt class="arguments">(optional) path</dt>
					<dd class="arguments">
						the path of this pile; both relative and absolute 
						paths are supported.
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileInclude (SomePile)<br />
				pileInclude (SomePile "./somepile_in_nonstandard_path")
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileCreateCopyTarget">pileCreateCopyTarget</a></h1>
		<p>
			Creates a target to copy files.
			If <b>base_path</b> is provided then the path
			structure is going to be preserved,
			otherwise all files are going to be copied in same directory.
		</p>
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">target_name</dt>
					<dd class="arguments">
						name of the target to be created;
					</dd>
					<dt class="arguments">target_description</dt>
					<dd class="arguments">
						a description to add to this target;
					</dd>
					<dt class="arguments">destination_path</dt>
					<dd class="arguments">
						path where to copy the files;
					</dd>
					<dt class="arguments">files_list</dt>
					<dd class="arguments">
						list of files to copy;
					</dd>
					<dt class="arguments">(optional) base_path</dt>
					<dd class="arguments">
						part of the path that is used as a reference for
						computing relative paths from <b>files_list</b>;
					</dd>					
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileCreateCopyTarget (<br />
				&nbsp;&nbsp;target_1 "copy some files"<br />
				&nbsp;&nbsp;"${CMAKE_BINARY_DIR}/dump"<br />
				&nbsp;&nbsp;${SOME_FILES})
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileCopyHeaders">pileCopyHeaders</a></h1>
		<p>
			Creates a target that copies the headers from a pile to build directory.
			Name of the new target is <b>copy_<em>pile</em>_headers</b>.
			The files are copied to <b>${CMAKE_BINARY_DIR}/build/include</b>
			It is assumed that <b><em>PILE</em>_HEADERS</b> and 
			<b><em>PILE</em>_PATH</b> are defined.
		</p>
		<p>
		Internally the macro simply calls <a href="#pileCreateCopyTarget">pileCreateCopyTarget</a>
		</p>
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile;
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileCopyHeaders (SomePile)
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileSetDependencies">pileSetDependencies</a></h1>
		<p>
			Set dependencies for a pile.	
			The list can be empty. Basically the macro creates a variable
			<b><em>PILE</em>_DEPENDENCIES</b> and, if debugging is enabled, informs the
			user about them.
		</p>
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile;
					</dd>
					<dt class="arguments">dependencies</dt>
					<dd class="arguments">
						list of pile names that this pile depends on;
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileSetDependencies (SomePile ${LIST_OF_DEPENDENCIES})
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileSetCategory">pileSetCategory</a></h1>
		<p>
			Set the category for a pile.	
		</p>
		
		<p>
			The list can be empty; if there are more than one items in 
			the list they are interpreted to be components of a path.
		</p>

		<p>
			A pile has a single category and multiple tags. All the
			components of the category list are added as tags.
			pileSetCategory("p1" "a;b;c") is thus interpreted like
			a/b/c/p1 by a tool looking to store the piles or categorize.
		</p>

		<p>
			The macro defines or changes <b><em>PILE</em>_CATEGORY</b>
			and <b><em>PILE</em>_TAGS</b> variables.
		</p>
		
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile;
					</dd>
					<dt class="arguments">category</dt>
					<dd class="arguments">
						the category as a list;
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileSetCategory (SomePile "a;b;c")
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileSetTags">pileSetTags</a></h1>
		<p>
			Set the tags for a pile.	
		</p>
		
		<p>
			The list can be empty; the macro defines or changes 
			<b><em>PILE</em>_TAGS</b> variables.
		</p>
		
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile;
					</dd>
					<dt class="arguments">tags</dt>
					<dd class="arguments">
						the tags as a list;
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileSetTags (SomePile "a;b;c")
				</div>
			</dd>
		</dl>
	</div>
	
	
	<div class="section">
		<h1 class="section_title"><a name="pileSetVersion">pileSetVersion</a></h1>
		<p>
			Set the version for a pile.	
		</p>
		
		<p>
			The list should contain major, minor and patch components.
			The macro defines or changes
			<b><em>PILE</em>_MAJOR_VERSION</b>, <b><em>PILE</em>_MINOR_VERSION</b>,
            <b><em>PILE</em>_PATCH_VERSION</b>, <b><em>PILE</em>_VERSION_STRING</b>,
            <b><em>PILE</em>_DEBUG</b> and <b><em>PILE</em>_RELEASE</b>.
		</p>
		
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile;
					</dd>
					<dt class="arguments">value</dt>
					<dd class="arguments">
						the version;
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileSetVersion (SomePile "1;0;0")<br />
				pileSetVersion (SomeOtherPile "1;0;0;d")<br />
				pileSetVersion (SomeThirdPile "1;0;0;debug")<br />
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileSetMode">pileSetMode</a></h1>
		<p>
			Set the use mode.	
		</p>
		
		<p>
			The list should contain major, minor and patch components.
			The macro defines or changes
			<b><em>PILE</em>_STATIC</b>, <b><em>PILE</em>_PILE</b>,
            <b><em>PILE</em>_SHARED</b> with the one being selected 
			set to ON and the others to OFF.
		</p>
		
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile;
					</dd>
					<dt class="arguments">mode</dt>
					<dd class="arguments">
						the mode;
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileSetMode (SomePile "STATIC")<br />
				pileSetMode (SomeOtherPile "PILE")<br />
				pileSetMode (SomeThirdPile "PILE_SHARED")<br />
				pileSetMode (SomeFourthPile "SHARED")<br />
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileSetCommon">pileSetCommon</a></h1>
		<p>
			Set common properties.	
		</p>
		
		<p>
			This is just a wrapper around the other macros:
			<a href="#pileSetDependencies">pileSetDependencies</a>,
			<a href="#pileSetCategory">pileSetCategory</a>,
			<a href="#pileSetTags">pileSetTags</a>,
			<a href="#pileSetVersion">pileSetVersion</a>,
			<a href="#pileSetMode">pileSetMode</a>.
		</p>
		
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile;
					</dd>
					<dt class="arguments">version</dt>
					<dd class="arguments">
						the version;
					</dd>
					<dt class="arguments">mode</dt>
					<dd class="arguments">
						the mode;
					</dd>
					<dt class="arguments">dependencies</dt>
					<dd class="arguments">
						the list of piles this pile depends on;
					</dd>
					<dt class="arguments">category</dt>
					<dd class="arguments">
						the list for category;
					</dd>
					<dt class="arguments">tags</dt>
					<dd class="arguments">
						the list of tags;
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileSetCommon (SomePile<br />
				&nbsp;&nbsp;"1;0;1"<br />
				&nbsp;&nbsp;"STATIC"<br />
				&nbsp;&nbsp;"APile;Another"<br />
				&nbsp;&nbsp;"cat1;cat11"<br />
				&nbsp;&nbsp;"tag1;tag2")<br />
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileConfigFile">pileConfigFile</a></h1>
		<p>
			Configures the file for a pile.	
		</p>
		
		<p>
			The input file is <b><em>pile</em>-config.h.in</b> an the
			output is <b><em>pile</em>-config.h</b>.
		</p>
		
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile;
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileConfigFile (SomePile)<br />
				</div>
			</dd>
		</dl>
	</div>
	
	<div class="section">
		<h1 class="section_title"><a name="pileSetSources">pileSetSources</a></h1>
		<p>
			Set the list of sources.	
		</p>
		
		<dl>
			<dt>Arguments:</dt>
			<dd>
				<dl class="arguments">
					<dt class="arguments">name</dt>
					<dd class="arguments">
						name of the pile;
					</dd>
					<dt class="arguments">headers</dt>
					<dd class="arguments">
						the list of headers;
					</dd>
					<dt class="arguments">sources</dt>
					<dd class="arguments">
						the list of sources;
					</dd>
				</dl>
			</dd>
			<dt>Example:</dt>
			<dd>
				<div class="code_sample">
				pileSetSources (SomePile ${HEADERS} ${SOURCES})<br />
				</div>
			</dd>
		</dl>
	</div>	
	

	
</div>
